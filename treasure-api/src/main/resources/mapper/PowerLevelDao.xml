<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.treasure.dao.PowerLevelDao">


    <insert id="insertPowerLevel">
        insert into ct_power_level (powerlevel_id,user_id,powerlevel,power_gift,power_sum)
         VALUES
        ( #{powerlevelId},#{userId},#{powerlevel},0,0);
    </insert>

    <select id="getPowerLevelByUserId" resultType="io.treasure.dto.PowerLevelDTO">
        select * from ct_power_level where user_id = #{userId}
    </select>
    <update id="updatePowerGiftByUserId" parameterType="io.treasure.entity.PowerLevelEntity">
        update ct_power_level
        set power_gift= power_gift + #{powerGift}
        where user_id=#{userId}
    </update>
    <update id="updatePowerSumByUserId" parameterType="io.treasure.entity.PowerLevelEntity">
        update ct_power_level
        set power_sum= power_sum + 1
        where user_id=#{userId}
    </update>

</mapper>